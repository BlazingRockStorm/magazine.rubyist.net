---
layout: post
title: RegionalRubyKaigi レポート (xx) 鹿児島Ruby会議02
short_title: RegionalRubyKaigi レポート (xx) 鹿児島Ruby会議02
tags: 0062 regionalRubyKaigi
post_author: okuramasafumi
created_on: 2023-04-01
---

{% include base.html %}

## はじめに

この記事は先日鹿児島市のmark MEIZANにて開催された鹿児島Ruby会議02のレポート記事です。筆者（大倉）は登壇者として参加しています。

このレポートでは全体的な雰囲気をお伝えしつつ、それぞれのトークの内容についてもカバーしています。

## イベントの概要

鹿児島Ruby会議02は2023年3月4日（土）にmark MEIZANにて開催されました。場所は鹿児島市の繁華街である天文館から徒歩で約10分ほどのところにあります。

会場のすぐ近くに桜島に行くためのフェリー乗り場があり、筆者も近くまで行って写真を撮ってきました。

イベントは12時から18時までで、トークは各20分間のトークが8つありました。

## トークについて

ここからはそれぞれのトークの内容についてご紹介していきます。なお、表記は全て公式サイトから引用しています。

### yoshikouki - 鹿児島からRubyではじめる新規サービス開発

自社での開発の実例を通して、Railsがスタートアップでどのように活用されているか、そのメリットとともに紹介する内容でした。

各種ライブラリが揃っていることによる拡張の容易さはもちろんのこと、Rails Wayに従うことで中長期的な複雑さをある程度抑制できることや、様々な問題に対する知見があることも重要なポイントということでした。

具体例として挙げられたGMOレンシュというサービスは3人で開発され、サービスレイヤーを非常に限定的な用途にのみ使用するなどできるだけRails Wayを遵守しつつ、テーブル設計をしっかりと行うこと、認証や決済のような箇所にはSaaSを使うことで高速な開発を行ったことが紹介されていました。

### 杉山恵理子 - Ruby に背中を押してもらったコミュニティ参加からオーガナイザーまでの道のり

初めてRubyコミュニティに参加してからイベントのオーガナイザーをやるまでのストーリーをお話していただきました。

Rubyを始めた時点ではなにもわからないので知っている人たちとつながるためにコミュニティに参加し、その一歩先にRails GirlsやRubyKaigiなどがあるというお話でした。特にRails Girlsで自信を得たことやRubyが好きであるという思いを強めたことから、次は発表をしてみたいという気持ちを持ってKaigi on Rails 2022に初めてプロポーザルを提出するなどの活動を行うようになったそうです。今回の発表が初めての登壇ということで、次回は技術をテーマに発表したいという意欲も持っているということでした。

杉山さんはRails Girls Tokyo 15thのオーガナイザーでもあるのですが、「誰もやらないなら自分がある」という意気込みでオーガナイザーに名乗りを上げたとのこと。コミュニティへの熱意が伝わるトークでした。

### うなすけ - QUICをRubyの世界に持ってくる活動をしています

QUICというプロトコルをRubyで実装しているというお話でした。

QUICというのはHTTP/3で使われるプロトコルであり、HTTP/2ではTCPが担当している領域をUDPベースのQUICが担当するようになるということが紹介されました。その際、HTTP/2においてはTCPとTLSが連携していた部分がHTTP/3ではQUICのみによって担われる、つまりQUICはTLSを内包しているということが図と共に示されました。

うなすけさんは一度QUICを実装しようとしたところ、「やったことをないことをやる」ことの大変さのために挫折し、QUICのPython実装であるaioquicというライブラリをRubyに移植するというアプローチに変更することにしたということでした。今はRuby Associationの開発助成に応募することで締め切りを強制的に設定しつつ作業を進めているとのことでしたが、やはりTLSの層、暗号化の部分は実装が非常に大変であるというお話でした。

発表時点では10000行を超えるRubyコードを書いているということですが、実装としてはPythonの移植であるためにインターフェースをRubyらしくすることが課題であるということでした。また、なぜこれをやっているのかという問いに対して、「そこにRubyがないから」「Just for Fun」という理由が示されたのはとても印象的でした。

### トミー - 「初めてRailsアプリをリリースしました！」のその後

自作のポートフォリオアプリを作ったその後のお話でした。そのポートフォリオは"SHADONE"というシャドーイングの練習用アプリで、一度バズって就職活動でも1社目で内定を得たものの、就職後に実力が足りないことを感じたことから「過去の栄光」と感じていたということです。しかし、ポートフォリオアプリとしては比較的珍しくメンテナンスを続けており、就職してから1ヶ月後には技術を身につけるための実験場として、仕事で学んだことを試す場としてSHADONEを使うようにしました。その結果、休日も仕事をしている気分になってしまい楽しくなくなったそうです。

そこで、「なぜプログラミングをしているのか」を問い直し、「仕事ができるからプログラミングが楽しいのではなく、プログラミングが楽しいから仕事ができる」のかもしれないという考えにたどり着き、SHADONEをメンテナンスする理由を楽しむことに変えたということです。具体的には仕事には直結しないような新技術を試しており、かつてのようにプログラミングを楽しいと思えるようになったそうです。

### 岡嵜 雄平 - mrubyでマイコンの世界に足を踏み入れる

マイコンでmrubyを動作させるお話でした。ESP32というマイコンでmrubyを動作させるmruby-esp32というプロジェクトでmrubyを動作させる方法が解説され、その敷居の高さを下げたいという想いが述べられました。そのための具体的な方法としてGitHub Actionsでmruby-esp32のバイナリをビルドし、それをダウンロードすればあとはesptoolsというソフトウェアをインストールするだけでマイコンでmrubyが動作するということが紹介されました。

今後やりたいこととしてはmrbgemsの充実やドキュメントの整備などが挙げられていました。

### 大倉雅史 - Rubyではじめる自動テスト

Rubyにおける自動テストの概要についてのお話でした。まず自動テストについての概略が紹介された後、自動テストの恩恵や種類、注意点が解説されました。特に強調されていたのは「自動テストはとりあえずやるもの」という点です。

続けてRubyの世界におけるテストライブラリとして、RSpecなどのテストフレームワークやDSLとしてのCapybara、Fakerなどのサポートライブラリが紹介されました。さらに良いテストコードの特徴が述べられました。基本的には同じコードであるので可読性を重視することなどがありましたが、RSpecについては議論になりやすいこともあるのでローカルな慣習に従うと良いということが強調されていました。

最後にはライブコーディングで今回のトークの内容を復習しつつ、TDDが実践されていました。

### 塩井美咲 - たのしいRubyの構文解析ツアー

Rubyのパーサーについてのお話でした。Rubyの内側では字句解析と構文解析が行われ、得られた構文木をコンパイルしてYARVバイトコードに変換されているということが紹介されました。字句解析はスキャナ、構文解析はパーサというソフトウェアが担当し、スキャナはソースコードから単語を取り出し記号と紐付けること、パーサはスキャナから記号を受け取って抽象度の高い記号に変換し、それにフックして構文木を作成することがその責務であると解説されました。

後半は"1 + 2"というソースコードを元に構文解析が行われる様子を追っていく内容でした。

### 松田 明 - Rails 7.1をn倍速くした話

Railsを高速化するお話でした。まずRailsの遅さが紹介された後、なぜRailsが遅いのかは謎であり、ボトルネックもなく全体的にもっさりしていること、パフォーマンスチューニングのアプローチとしてObject Allocationsの指標に注目するという戦略が語られました。アロケーション数が減れば高速化が達成されるのではないか、という仮説を立て、`GC.stat`を使って計測するという手法が紹介されましたが、最終的には`memory_profiler`というgemを使うことで詳細な情報を取得するようにしたということでした。

細かく生成されるオブジェクトを削っていき、最終的には`render plain`の速度が3~4倍速くなったという結論でした。
