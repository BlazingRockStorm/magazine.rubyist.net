---
layout: post
title: 訳者による『研鑽Rubyプログラミング ― 実践的なコードのための原則とトレードオフ』の紹介
short_title: 訳者による『研鑽Rubyプログラミング』の紹介
tags: 0062
post_author: かくたに
created_on: 2023-04-30
---
{% include base.html %}

## 書籍情報

### 『研鑽Rubyプログラミング ― 実践的なコードのための原則とトレードオフ』


![polished-ruby-programming-ja-cover]({{base}}{{site.baseurl}}/images/0062-polished-ruby/cover.jpg)

著者・訳者
: Jeremy Evans (著)、角谷信太郎 (訳)

発行日
: 2023 年 4 月 14 日 第 1 版 第 1 刷

ISBN
: 978-4-908686-17-7

出版社
: [ラムダノート](https://www.lambdanote.com/collections/ruby-1/products/polished-ruby)

価格
: 3,600 円 + 税 (紙書籍)

原書
: ["Polished Ruby Programming" (Packt)](https://www.packtpub.com/product/polished-ruby-programming/9781801072724), 2021年7月発行

訳者個人による本書のサポートページを [https://scrapbox.io/kensan-ruby/](https://scrapbox.io/kensan-ruby/) に用意しています。
書籍の入手に関する補足や、書籍の内容について関連情報をまとめていく予定です。

(本記事の最後に、Rubyist Magazine 読者に向けた本書のプレゼントのお知らせがあります。お見逃しなく!)

## 当初の予定より1年程遅延しましたが、RubyKaigi 2023に間に合いました…

2021 年 7 月に原書が発行された Jeremy Evans 著 "Polished Ruby Programming" の日本語版の正式版の紙書籍と電子書籍 (PDF) を 2023 年 4 月 14 日にラムダノート社から刊行することができました。
2021 年 11 月 30 日に販売を開始したβ版から数えると約 1 年 5 ヶ月、翻訳作業用リポジトリの最初のコミット (2021 年 8 月 24 日)から約 1 年 7 ヶ月、[Kaigi on Rails 2021 の講演](https://scrapbox.io/kensan-ruby/Polishing_on_%22Polished_Ruby_Programming%22)での「2022 年陽春刊行(予定)」という予告から遅れること約 1 年、ようやく皆さまのお手元に届けることができました。
特に、関係者各位ならびにβ版の読者の皆さまには大変お待たせすることになってしまい恐縮です。
この場を借りてお詫び申し上げます。
それにしても、著者の Jeremy の登壇予定もある 5 月の RubyKaigi 2023 に間に合ってほんとうによかったです…。

Rubyist Magazine 読者の皆さんが手に取る価値のある一冊になっていると思うので、よろしくお願いします 🙏

* [ラムダノートの本書の説明ページ](https://www.lambdanote.com/collections/ruby-1)から紙書籍とPDFを購入できます
* [訳者個人によるサポートページ](https://scrapbox.io/kensan-ruby/WelcomeVisitors)で、本書や本書の入手にまつわる情報をまとめています

## 本書の紹介

一般的に書籍を紹介するなら、「誰が、どんな内容の本を書いていて、どんな特色があるのか」といったことを書くのが順当だと思うのですが、本書に関しては訳者の私が改めて書くまでもない——ということを「訳者あとがき」に書いたので、ここでも引用します:

> 本書を楽しむためのコンテキストは、ありがたいことに、導入部分ですでに明らかにされています。原著者であるJeremy EvansさんのRubyコミュニティにおける活躍ぶりとその評価は「本書に寄せて」でRubyの言語設計者であるまつもとゆきひろさんによって語られていますし、本書の特徴は「日本の読者の皆さんへ」で原著者自身によっていみじくも説明されています。
> それらを要約すると、本書は**Rubyコミュニティのリーダーをして「完璧超人か」と言わしめるような優れたプログラマーが、「読者が『すでにRubyをよく知っている』ことを前提」として、「Rubyプログラミングの原則と、実装方針を決めるにあたって考慮すべきトレードオフ」を伝えるために執筆されています**。
> よって、訳者としてさらに付け加えることはもうほとんどありません（お手元のRubyと一緒にじっくりと本文をお楽しみください）。[強調は引用者による]

(「[訳者あとがき](https://scrapbox.io/kensan-ruby/%E8%A8%B3%E8%80%85%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D)」と、引用文中で言及している「[本書に寄せて](https://scrapbox.io/kensan-ruby/%E6%9C%AC%E6%9B%B8%E3%81%AB%E5%AF%84%E3%81%9B%E3%81%A6)」「[日本の読者の皆さんへ](https://scrapbox.io/kensan-ruby/%E6%97%A5%E6%9C%AC%E3%81%AE%E8%AA%AD%E8%80%85%E3%81%AE%E7%9A%86%E3%81%95%E3%82%93%E3%81%B8)」が本書の日本語版独自コンテンツで、いずれも全文を公開しています。購入の参考にしてもらえるとうれしいです。)

では、本書に「どんな特色があるのか」……これも出版元の[ラムダノートからの発売開始アナウンス](https://www.lambdanote.com/blogs/news/ruby-4)が端的にまとめてくれているのでした。
いわく、「**世界でいちばんRubyを扱うのがうまいプログラマーの一人が、Rubyでプログラムを書いたことがあるすべてのプログラマーに向けて書いた、プログラミングにうまくなるコツが惜しげもなく言語化されている本**(原文ママ)」というのはなかなか的を射ていると思います。
本書が「**最先端のRubyプログラマーが何を考えてコードを書いているかを知る最短の方法**」であるという結びも良いですね。

この、本書で語られている、「Jeremyがどんなことを考えてRubyのコードを書いているのか」を日本語版で端的にあらわすために出版チームで知恵を出しあって錬成した日本語副題が「**実践的なコードのための原則とトレードオフ**」です(ちなみに日本語版書名の『研鑽Rubyプログラミング』はラムダノートの鹿野さんの発案だっと記憶しています)。
ただし、この「原則とトレードオフ」は「Rubyコミュニティとして広く共有されているもの」というよりは、あくまでも「著者であるJeremyにとっての原則とトレードオフ」の色合いが強くなっています
——といっても、20年近いRuby経験のある、著名なライブラリの作者で、Rubyコミッター未就任の状態でRubyKaigi 2019の[Keynote Speaker](https://rubykaigi.org/2019/presentations/jeremyevans0.html#apr20)をつとめて(直後にRubyコミッターに就任しました)、[Rubyのイシュートラッカー](https://bugs.ruby-lang.org/)のイシューをトリアージしまくったこととRuby 3.0のキーワード引数の仕様の整理と実装を牽引した功績から[RubyPrize 2020](https://rubyprize.jp/20_nominees.html)を受賞したRubyプログラマーが「Rubyのコードを書くときに大事だと考えていること」は一聴に値するはずですし、本文にもあるように「本書の対象読者は、自分自身の Ruby プログラミングを改善するために原則を学ぶことに関心のある、中級から上級の Ruby プログラマー」です。
中級から上級のRubyプログラマーが自分自身のRubyプログラミングを改善するために学ぶなら、当然、本書で語られる(Jeremyによる)原則とトレードオフの内容は自分自身で判断できるはずです（あるいは、本書の筆致にJeremyがそのように読者を信頼しているということがあらわれているのかもしれません）。

本書の各章はおおむね独立した章になっているので、「中級から上級のRubyプログラマー」であれば、興味のある章を好きな順番で拾い読みしていただいて問題ないと思います。
当然、冒頭から順番に読んでいただいて何の問題もありませんが、けっこうページ数も多いのでで、お目当ての章があるなら先取りしちゃったかまわないと思います。
読み進めていく際には、是非、本文の「JeremyがRubyのコードを書くときに考えていること」と読者の皆さんそれぞれがRubyのコードを書くときに考えていることを比較しながら読んでもらえると、実りある読書体験になると思います。
日本の読者の皆さんに楽しんでいただけること以上に訳者としてのよころびはありません。
## 中級を目指したいRubyプログラマー向けの本書の読みかた(の一例)

中級から上級のRubyプログラマーは本書を好きに読み進めればよいですし、そうした人たちは言われなくても好きに読み進めそうな気もします。
しかし、まだ中級に至らない(が中級を目指したい)、自分自身の判断に自信を持てないRubyプログラマーはそうもいかないかもしれません。
もちろん、冒頭から順番に読み進めていくという真っ当な方法もあるのですが、本書は第1章からして少々クセのある筆致になっています。
そこで(これはあくまでも「私が挙げる一例である」とお断りしたうえで)、「第1章からちょっと刺激が強いな…」と感じてしまうような、「中級を目指したいRubyプログラマー」向けの本書の読みかたの一例を紹介したいと思います。

### 中級を目指したい読者がまず読むとよさそうな2つの章

中級を目指したい読者がまず読むとよさそうな章として訳者個人としておすすめしたいのは、「第I部 Rubyプログラミングの基礎的な原則」と「第II部 Rubyのライブラリプログラミングの原則」それぞれの部の最終章です。具体的には次の2つの章です:

* **第14章 ライブラリを最適化する**
* **第6章 コードを読みやすくフォーマットする**

どちらを先に読んでもかまわないですが、読者にとってすぐに実利があると思うのは第14章です。
皆さんの普段のRubyプログラミングにもすぐに応用できますし、本書を読み進めるうえでも役に立ちます。
第6章をおすすめする理由は、本書の第I部と第II部の残りの部分を読み進めるうえで念頭に置くとよさそうな洞察が得られるからです。この章を読むことで、「JeremyがRubyプログラミングとRubyプログラマーをどのように捉えているか」という本書の世界観を、技術的な詳細にあまり立ち入らずに把握できます。

### 第14章 ライブラリを最適化する

本書ではライブラリとアプリケーションは厳密に使い分けられていませんが、その筆致からはJeremy自身の実績と経験を踏まえて、ライブラリのコードを書くことに重点がおかれていることがうかがえます。
本書で説明される内容はRubyのアプリケーションコードを書く際に適用できる部分もありますが、世界的にもRubyの第一人者であるささださんが本書のレビューで述べているように、まずは「[書きやすく読みやすいコードが一番ですよ](https://zenn.dev/ko1/articles/4fad1e0b348c08)」。
…という注意書きを述べたうえで、本章を最初に読むことをおすすめする理由は次のとおりです。

#### 1.自分の書いたコードの実行性能の話題はいわゆる「入門書」では扱われないことが多い

書籍の目的に照らすと、取り扱う範囲外となるので、説明が割愛されることが多くなります(それはそう)。紙幅には限りがありますから、優先順位の問題ですね。

#### 2. 本書で語られる「トレードオフ」の多くに実行性能の観点が含まれている

翻訳原稿を検索したところ、「実行性能」という単語は、第10章と第11章を除く15章の162箇所に出現していました。本書を読み進めていく上で「速い」とはどういうことなのかを手元で試せるようになっていると、本書をより深く楽しめると思います。

#### 3. 「速い書き方」にはバージョン毎で差異があるので、自分で検証できる必要がある

Rubyの実行性能はRuby自体の進展に伴ない、リリースバージョンごとで「速い書き方」に差異があります。
そのため、自分の手元で検証できたほうがよいでしょう。
この考えかたについては、前掲のささださんの記事の「[性能評価の難しさ](https://zenn.dev/ko1/articles/4fad1e0b348c08#%E6%80%A7%E8%83%BD%E8%A9%95%E4%BE%A1%E3%81%AE%E9%9B%A3%E3%81%97%E3%81%95)」のセクションも参照してください。

事実、本書の「この書き方のほうが速い」という説明自体も、原書出版以降にリリースされたRuby 3.1や3.2では「速い書き方」が異なるケースがあったので、訳注で補足しています。
そして、そのフィードバックの多くは訳文のレビューに参加をお願いしたささださんから情報提供いただいたものです。
この場を借りて厚く御礼申し上げます。
本当にありがとうございました(みんなも感謝しよう! …とはいえ、訳文の文責は依然として訳者にあります)。
#### 4.オープンソース活動で実行性能を示すことは提案の説得力に効く

オープンソース活動において、機能提案や問題報告で実行性能を示すことは説得力を増すうえで大切な振る舞いです。
事実、性能評価は広くおこなわれているプラクティスですが、これまで日本語による解説で「定番」と呼べるようなものはなかったと思います(ググれば日本語も英語も記事はたくさん出てきます)。
——が、状況は少し変わって、2023年2月発行の『[WEB+DB PRESS Vol.133](https://gihyo.jp/magazine/wdpress/archive/2023/vol133)』の西山さんの連載、「Ruby 3標準添付ライブラリ紹介」でベンチマーク関連のライブラリが紹介されました(記事では[benchmark-driver](https://github.com/benchmark-driver/benchmark-driver)も紹介されています)。

本文ではベンチマークのためのツールの使い方だけでなく、ベンチマークとどう付き合っていくべきかという考え方もあわせて示しているので、中級を目指す読者の役に立つと思います。

#### とはいえ、そのうえでも注意点はある…けれど、やっぱり早めに読んでほしい

ただし、章の最後のセクション、「**14.4 何もかもが遅い場合の対処法**」は発展的な話題なので、初見では読み流してもらって問題ないと思います。
本文中では筆がのってきたのか、メソッドの引数定義でJeremyは唐突に「Rubyパーサーをだましてエラーを回避します」といったテクニックを披露しはじめますが、まずは「お、おう…」という感じで読み流してもらって構いません(書きやすく読みやすいコードが一番ですよ!)。

一方で、このセクションのテーマ「何もかもが遅い場合の対処法」は実世界では起こりうる話でもあります。具体的には、これもまた発展的な話題ですが、2023年3月に開催された[鹿児島Ruby会議02](https://k-ruby.com/kagoshima-rubykaigi02/)での松田さんの講演「Rails 7.1をn倍速くした話」はまさに、Railsで「何もかもが遅い場合」に実行性能をどのように改善したかという取り組みを披露していました(講演資料がアップロードされることを切望しています 🙏)。

中級者を目指す読者が冒頭から順番に読み進めると、第14章に到達するのは少し後になるかもしれません。
書籍の外の実践にもすぐ応用できる内容なので、先に読んでおくとお得な章として紹介しました。

### 第6章 コードを読みやすくフォーマットする

Jeremyが本書を通じて語る、Rubyプログラミングにおける「実践的なコードのための原則とトレードオフ」は、Rubyの機能や文法だけでなく、Ruby自体(具体的にはCRuby、MRIと呼び習わされているC言語を中心とした実装)が動作する仕組みを読者がある程度理解していることを前提にしています。

中級を目指したい読者に向けて、本書を読み進めるうえでの理解を深めるための[関連リソース](https://scrapbox.io/kensan-ruby/%E9%96%A2%E9%80%A3%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9)を、サポートページで多少は補足したいと考えています。
とはいえ、本書の技術的な詳細への立ち入り度合いは第1章から容赦がありません。
せっかくの「中級を目指したい読者」が取り組もうとしてくれたのに、序盤で振り切られてしまっては勿体ないと思っています。

そこでおすすめしたいのは、本書の残りを読み進めるうえで念頭に置くとよさそうな「原則とトレードオフ」についての考え方を、技術的な詳細にあまり立ち入らずに把握できる第6章をまず読んでおくことです。

本章で扱うのはいわゆる「コーディングスタイル」です。

(続きは書けたらあとで書きます… 😇)

「JeremyがRubyプログラミングとRubyプログラマーをどのように捉えているか」という本書の世界観をあらかじめ掴んでおくことは、本書の技術的詳細のなかで迷子になることを防ぐ役に立つと思います(たぶん)。

## 次はどの章を読むとよさそう？

第14章と第6章に目を通したら、その後は冒頭から順番に読み進めていってもらっても構いませんし、(中級から上級のRubyプログラマーのように)自分が興味のある章を好きな順番で読み進めていってもらってもまったく問題ありません。

訳者個人としておすすめしたい章は他にもたくさんありますが、この記事で紹介した2章に次ぐ章をひとつ挙げるならば、おすすめは「第4章 メソッドと引数」です。
Jeremy自身がRuby 3.0のキーワード引数の仕様の整理に取り組んだだけあって、特にキーワード引数については、詳細に解説してくれています。
引数の種類の説明のスタイルも独特なので、ご自身の理解と照らして読み進めてみるのも興味ぶかいと思います。
また、この章では、`ruby2_keywords`という互換性のための機能についても丁寧に説明されています。
`ruby2_keywords`は、訳注で補足もしているように、Ruby 3時代を迎えた現代にあっては、これから書き下ろすRubyコードではその出番も減っていくと思いますが、既存のライブラリのコードを読んだり、メンテナンスする局面では出会うこともある機能です。
その考え方は理解しておくと役に立つと思います。

## 他におすすめの読み方: 先達の力を借りる

米国在住(投稿当時)のYukiさん(これはRubyコミッターの西嶋さんでは?)がAmazon.comに投稿している、[書の原書のレビュー](https://www.amazon.com/review/R10RIFQIHUYU36/ref=cm_cr_srp_d_rdp_perm?ie=UTF8&ASIN=1801072728)が示唆に富んでいたので紹介します。

> For beginners, I’d recommend finding an advanced Ruby programmer for your network that you can ask questions to. It may take time to understand even a short snippet of code, but long-term, the knowledge you gain from this book will be valuable.
>
> (引用者訳: 初学者の皆さんには、質問できるRubyにくわしいプログラマーをご自身の周囲で見つけることをおすすめします。文中の短いコード片を理解するのにも時間がかかるかもしれませんが、長期的には、本書から得られる知識はかけがえのないものになるでしょう)

職場の同僚や地域コミュニティの仲間、オンラインでのつながりなど、自分よりも研鑽が進んでいそうなRubyプログラマーに質問したり、一緒に本書を読んだりするのも多角的な視点からの洞察が得られそうです。
いわゆる読書会や輪読会のような形式で読み進めていくのもよいかもしれません。
もし、質問する相手が周囲に見つからない場合は、[ruby-jpのSlack](https://ruby-jp.github.io/)や、日本語版のサポート用の[Discordサーバー](https://scrapbox.io/kensan-ruby/Discord%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC)で質問してみるのもよさそうです。

## おわりに

「中級を目指したい読者」に警戒心を抱かせるような紹介の仕方になったかもしれませんが、「[技術書は気に入った一節を見つけるだけでいい](https://zenn.dev/katzchang/articles/38fc8ec8dd9cab)」という名言もあります。
訳者のお気に入りの一節はをここでひとつだけ紹介するなら「第14章 ライブラリの最適化」の文中にある「**Rubyのように動的で使いやすくプログラマーフレンドリーな言語で高速なのはRubyだけ**」です。
皆さんにも、まずは気楽に読んでもらって、気に入った一節を見つけてもらえるとうれしいです。
本書の感想をSNSに投稿する際には、**#研鑽Ruby**のハッシュタグを添えてもらえると、訳者がエゴサーチしやすいので助かります。
皆さんの感想が読めることをたのしみにしています。

## 読者プレゼントのお知らせ

出版元であるラムダノート社さまのご厚意により、**『研鑽Rubyプログラミング ― 実践的なコードのための原則とトレードオフ』の紙書籍とPDFを3セット**、ご提供いただけることになりました。
そこで Rubyist Magazine読者のなかから**3名**の方に、1セットずつプレゼントしたいと思います。
興味を持たれた方は、下記リンク先の応募要件に目を通していただいたうえで、応募締切日までに必要事項をフォームに記入、送信ください。
Rubyist Magazine 読者の皆さまからのご応募をお待ちしております!

* **[『研鑽Rubyプログラミング』Rubyist Magazine 0062号読者プレゼント応募フォーム](https://forms.gle/b2wuYK1mRMPZW8Rr7)**

(応募多数の場合は抽選となります。また、当選者の発表は書籍の発送をもってかえさせていただきます)

応募締切(とその後の抽選)から発送まで待てない方は是非、紙書籍を買うと電子書籍版のPDFがついてくる[ラムダノート社の直販ページ](https://www.lambdanote.com/collections/ruby-1)から本書をご購入ください(**Kindle版の販売予定はありません**)。
また、紙書籍の購入金額との差額等で電子書籍版をお求めになることはできません。
各種オンライン書店や実店舗でお求めの場合はご注意ください。

## 緊急告知: RubyKaigi 2023の会期中に会場近辺で訳者が本書を手売りします!!

Rubyist Magazine 0062号のリリース時点では詳細未定になりそうですが、訳者個人として本書を持ち込んで、若干冊数の対面販売することを計画しています。詳細は決まり次第、本書のサポートページでお知らせします。

* **[https://scrapbox.io/kensan-ruby/kaigi2023](https://scrapbox.io/kensan-ruby/kaigi2023)**

ちなみにRubyKaigi 2023では[著者のJeremyも登壇予定](https://rubykaigi.org/2023/presentations/jeremyevans0.html#may12)ですし、「本書に寄せて」を寄稿いただいた[まつもとさんも(当然ですが基調講演で)登壇予定](https://rubykaigi.org/2023/presentations/yukihiro_matz.html#may11)です。
訳者である私、かくたにも[RubyKaigi 2023 Teamの一員](https://rubykaigi.org/2023/about/)として会場に出没します(RubyKaigiの会期前後に松本で訳者のサインが欲しい方は、先にJeremyのサインをもらってください 🙏)。
本書の関係者のサインをまとめて獲得できる絶好の機会です。是非ともご活用ください!
