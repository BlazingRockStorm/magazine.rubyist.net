---
layout: post
title: RegionalRubyKaigi レポート (80) 福岡Rubyist会議03
short_title: RegionalRubyKaigi レポート (80) 福岡Rubyist会議03
tags: 0062 FukuokaRubyistKaigi03Report regionalRubyKaigi
post_author: m-nishijima
created_on: 2023-04-01
---
{% include base.html %}

## RegionalRubyKaigiレポート (80) 福岡Rubyist会議02

* 開催日時 - 2023年2月18日 9:30-18:00
* 開催場所 - [リファレンス駅東ビル4階 会議室Q](http://re-rental.com/ekihigashi/access/)
![ko1.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/kaijou.jpg)
* 主催 - [Fukuoka.rb](https://fukuokarb.connpass.com/) / [株式会社Ruby開発](https://www.ruby-dev.jp/)
* 後援 - [一般社団法人 日本Rubyの会](http://ruby-no-kai.org/)
* 公式サイト - [Fukuoka RubyistKaigi 03](https://regional.rubykaigi.org/fukuoka03/index.html)
* 公式ハッシュタグ - _#fukuokark03_
* テーマ - これからを切り拓こう


書いた人: @m-nishijima

### はじめに
福岡で毎週オンラインで開催されているFukuoka.rb と、株式会社Ruby開発 の主催で 6年ぶりの福岡 Rubyist 会議が開催されました。

### 講演
#### Opening Talk
まず、はじめに主催の甚六さんから諸注意、スポンサーの紹介、会場に設営された八女茶のブースの紹介から福岡Rubyist会議ははじまりました。

#### Rubyist のためのカンタン動画制作
![yasukawa.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/yasukawa.jpg)

YassLab (株)の安川さんによる講演です。実際にiPadでこの講演の生配信を行いながら、配信や動画作成をカンタンに行う方法を講演されました。

安川さんの講演では、一般に難しいと考えている配信はハードやアプリの進化によってほぼiPadだけで一人だけで配信を行うことが可能であることを紹介されていました。講演などの配信で大事なのは音とのことで、iPadに無線でマイクを繋ぎ講演されていました。逆に画は程々にとのことで文字が読める程度に抑えるつまりiPadやスマホ内蔵のカメラで撮影することで機材を抑え配信の負担を減らしていました。
ソフトウェアの面では、iPadのブラウザだけで配信を完結させられることや、配信を動画化する際に行なう音量調整が動画ファイルをドラッグして1ボタン押すだけで完結できることなどを紹介されていました。
また、編集についても音の差し替えや音量の調整程度のカンタンな編集を行ない、人気がでた動画に字幕を起したりするところから編集ははじめれば良いとのことでした。

#### Ruby のリリースを爆速にするための方法
![shibata.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/shibata.jpg)

ANDPADの柴田さんによる講演です。
はじめに、バックポート・パッケージ・パッケージング・リリースなど各種リリース用語の解説が行なわれました。次に、ドキュメントの粒度やリリース体制・リリースサイクルなどをRubyと他のプログラミング言語の比較を説明されました。

その後、Rubyのリリースの自動化の経緯としてリリース中のパッケージの破損が起きていたこと、GitHub Actionsを使ってパッケージの作成が行なわれるようになったことが説明されました。しかし、無事に自動化でき、めでたしめでたしとなったわけではなかったそうです。手動で行っているであればログにより気づけたエラーをActionsがスルーしてパッケージングに失敗したり、またMakefileなどビルドに直接関係するファイルの編集や依存パッケージの配布の終了・Ubuntuのアップデートなど様々な要因で問題が起きたとのことでした。特にセキュリティリリースが大変とのことで、パッチの共有に制限があることで、手動でセキュリティリスク×サポートが続いているRubyのバージョン分手動で対応する必要があるそうです。

#### RubyKaigiのはなし
![soraha.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/soraha.jpg)

Cookpadのそらはさんによる基調講演です。
RubyKaigiの配信や翻訳を行なうアプリを実際に動作させながら講演されていました。

はじめにそらはさんのRubyKaigiへの向き合い方の話があり、「あまりがんばり過ぎない方針」という内容を話されました。これは
RubyKaigiが「スタッフが主役ではない」という考えなどからこのような方針でRubyKagiへ望んでいるそうです。
次にRubyKaigiのために内製されたRails等を利用して作られたソフトについて話されました。その中で印象的だったのは翻訳のための文字起こしをAWSを利用して機械化したことで、専門用語の読み取り精度があがったという話です。これは、事前に辞書登録で技術用語などを設定しておくことで、(分野を限定した場合)人間の通訳以上の文字起こしができたそうです。
また、昔はソフトのコントロールを会場でRails consoleで行っていたことや、最新でもWeb上でテンプレートは存在するものの細かな操作はjsonで書く仕様になっているなど、エンジニア・Rubyistに特化した操作性をしているそうです。
最後にRubyKagiのために構築しているネットワーク環境について話されました。LANケーブルを2358m買って1900m程敷設したことや、自家ISP(AS)まで冗長化したトンネルで繋いでいること、会場へは物理回線を2回線引いていたが一時的に8Mbitしか出なくなるなど、普通では聞けない話でした。

#### mruby on IoT devices.
![okazaki.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/okazaki.jpg)

株式会社Fusicの岡崎さんによる講演です。
esp32というマイコンをmrubyで動かしたことについて講演されました。

はじめは、実機を見せつつesp32というマイコンの説明や組み込み向けのRubyの処理系のmrubyについて紹介され、簡単に動作させる手順について話されました。
そこで、esp32をmrubyで動かすmruby-esp32がESP-IDF(esp32のフレームワーク)の最新バージョンに対応させる開発をおこなったことや、HTTP通信より軽量なMQTT通信のクライアントを開発し公開された話をされました。
最新バージョンへの追従では、ビルドシステムがMakeからcmakeになりそもそもビルドできない問題や、サポートされなくなったloop関数を置き換えたこと、C言語のバージョンがC99からC17へ変更されたことによって多発したエラーへの対応、ROMのパーティションの容量を調整したことなどを話されました。
MQTT通信のクライアントについては、コールバックを多用しないという考えのもとmruby-mqttではなく、ruby-mqttをベースに開発されたことなどを話されました。

#### Factorybot 改善ツール作成失敗と学び
![hachi.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/hachi.jpg)

freee株式会社のhachiさんによる講演です。
freee株式会社の開発合宿で作成されたテスト高速化のために開発されたFactorybot効率化ツールについて講演されました。

はじめにFactoryBotを使ったRSpecが遅くなる原因の紹介として、不必要なFactoryBot.createでDBに書き込みと、同じレコードを何度も書き込んでいることが挙げられました。前者は、DB書き込みが発生しないので高速なFactoryBot.Buildで十分な箇所でcreateしているということでした。これをSELECT, UPDATE, DALETEなどが実行されないレコードを検知することで警告するツールを作成されたそうです。また、後者は、contextのbeforeなどで各it毎に同一のレコードを生成していることを上げられました。その対策としてTestProfのbefore_allの使用を進められ、そのためにUPDATEされないレコードを検知し警告するツールを制作されたそうです。
そして、そのツールを使い改善ポイントの検出ができたそうですが、前者では偽陽性で、後者は偽陰性が多発するそうです。その理由として、前者では検索されないレコードを検出していますが、テストの内容として検索されないことをテストする場合などで本来検知しなくて良い箇所で検知される場合があったそうです。後者では、そもそもレコードのIDは異なっているので、どれが同じレコードか機械的に判断することが難しいという問題があるそうです。
最後にこれらの仮説・ツール作成を通した学びとして、素早い仮説検証によって失敗した際のダメージが少ないこと、偽陽性が発生することなど実装前に深く考慮すべきことなどを上げられました。(なお、後者に関しては実装してみることは大事で得られるものも多いとのことでした。)

#### ⁠外部コマンド実行入門
![pocke.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/pocke.jpg)

株式会社マネーフォワードのPocke(ぽっけ)さんによる講演です。
Rubyの外部コマンド実行の各種説明と、フローチャートで状況に応じた適切なコマンドについて紹介されました。

はじめに外部コマンドとはなにかについて説明されました。外部コマンドとはパス下にあるls, rm, git, rubyのようなコマンドで、Ruby上で実行するにはバッククオートで囲み記述する、systemメソッドなど方法があることを説明されました。
次に外部コマンド事項におけるセキュリティでコードインジェクションについて話されました。たとえば、"Hello; reboot"のような文字列を外部コマンドに入れると場合によってはrebootコマンドが実行されてしまうとのことでした。これは、外部コマンドがShellを経由した場合に発生するそうです。また、必然性がない外部コマンドを使用しない、コマンドと引数を分けて実行するなどの対策を紹介されました。
そして、エラー処理の有無や標準出力やエラー出力をどう取り扱いたいかなど、各状況に併せて最適な外部コマンドを実行するメソッドについてフローチャードで紹介されました。IO, Kernel, Open3など様々なクラスの多用な外部コマンド実行用のメソッドについて紹介されていました。

#### FjordBootCamp スポンサーセッション①
![komagata.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/komagata.jpg)

FjordBootCampのkomagataさんによるスポンサーセッションです。


月額課金方式のプログラミングスクールのFjordBootCampについて説明されました。月額なのでいつでもはじめられ、いつやめてもよいそうです。「全人類がプログラマーに向いているわけではない」とのことでした。ハードなカリキュラムで、1000時間程度かかることや実サービスを開発するカリキュラムで、ポートフォリオ作成がガチなど、就職までサポートされているそうです。また、OSSコミュニティーへの参加を激しく押しているそうです。

#### 株式会社ヤマップ スポンサーセッション②
![kirchner.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/kirchner.jpg)

株式会社ヤマップのArmin Kirchnerさんによるスポンサーセッションです。

RailsでVector tilesな地図の作成について話されました。国土交通省の情報をPostGISでDBに保存しRailsから扱うという内容で、拡大縮小ができる地図のデモを行なわれました。どのようなSQLを発行することで、地図の表示に必要なデータを取得し、JSONでどのように渡すかなど、ベクターな地図データという特徴的なデータの取り扱いについて説明されました。

#### 株式会社マネーフォワード スポンサーセッション③
![eto.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/eto.jpg)

株式会社マネーフォワードのyusuke-etoさんによるスポンサーセッションです。

「お金を前へ。 人生をもっと前へ。」という会社の理念やUターンやIターン先としてのマネーフォワードの福岡拠点の紹介をされました。またこれからを切り拓こうというFukuokaRubyistKaigi03のテーマに沿って、マネーフォワードの技術的負債の解消として全サービスで利用されていた共通DBを分離する話などをされました。

#### Rubyist Magazine Reboot
![nishiyama.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/nishiyama.jpg)

株式会社Ruby開発の西山さんによる講演です。
Rubyist Magazineの現状と将来への希望について講演されました。

はじめに、Rubyのドキュメントが不足していたことや日本Rubyの会の発足など、Rubyist Magazineの創刊の経緯などが話されました。次に、発行ペースの推移について話され、発行停滞の原因として人手不足などを上げられていました。そのためRubyist Magazineへ関わりをメリットを交えて話されました。編集部は公開前の記事を一早く読める。執筆者は編集者にチェックしてもらえることや記事が長く残ること。読者に良い記事を広めることなど。
その他にRubyist Magazineのソフトウェア構成や記事の記法の遷移、各種Githubリポジトリ、コミュニケーションの取り方などRubyist Magazineへ貢献するために必要な情報を説明されました。

この講演の質疑応答では会場のRubyistたちから、Rubyist Magazineへの熱い思いが多数出ていました。

なお、本記事が掲載されているRubyistMagazine62号も、この講演がきっかけで復活となりました。

#### Keynote: メンテできないコードをメンテする技術
![pen.jpg]({{base}}{{site.baseurl}}/images/0062-FukuokaRubyistKaigi03Report/pen.jpg)

株式会社コードタクトのペン！さんによる基調講演です。
TRICK(超絶技巧Ruby意味不明コンテスト)に提出されたコードの説明とそのメンテナンス方法について講演されました。

はじめにTRICKの理念の一つである「メンテナンス不能だが価値あるコードを世に放つことでRubyの使用を安定化する」というものに対して、ペン！さんが提出したコードは数ヶ月かけて作成されたもので、本当にメンテナンス不能というわけではないと説明されました。
次に槽(aquarium)、鼓動(heartbeat)、変化(localver)の3つのTRICK入賞されたAnimetion Quineについてコードやメンテナンス方法を説明されました。Animetion Quineとは、アニメーションの各フレームがコードでアスキーアートのように構成されており、なおかつ現在のフレームのコードが次のフレームのコードを呼び出すことでアニメーションが進行するQuineをAnimetion Quineと読んでいるそうです。水槽(aquarium)については、謝り訂正符号を使用することで、全フレームをアスキーアートとして利用できるようにしたことや、楕円の集合のみで魚や海藻を表現していること、泡によってフレーム数を表現していること、2種類のテストを用意したことなどを説明されました。鼓動(heartbeat)については、%w()記法の有無によって作品が単色・色鮮やかになることや、Syntax OKの確認にRipperを使っていることなどを説明されました。変化(localver)では、コードの対称性や、上下逆順での実行、読みにくいSyntaxの利用などその設計理念などを説明されました。
そして、TRICKへのアプローチの仕方と、メンテナンス可能にするためのジェネレーターやテストコードなどを整備することの大切さなどを話されました。
発表の随所でAnimetion Quineの実演され、最後には今回の福岡Rubyist会議のために作成されたAnimetion Quineを見せて講演をしめらました。

#### Closing Talk
主催の甚六さんから継続することは簡単でできることをやればいいこと、相手がいなくなり恩返しはできなくなることがあるが恩送りはできること、これからを切り開くためにアウトプットをすべきことなどを話され、福岡Rubyist会議03は終了しました。また、会場の全Rubyistから拍手が起きるなど、とても熱いClosing Talkでした。
### 主催者コメント

福岡 Rubyist会議 03 主催の甚六です。2020 年に開催予定でしたが時代に阻まれ、3 年越しの開催となりました。無事開催でき、胸をなでおろしています。

さて、当地域 Ruby会議ですが、名称が Ruby **ist** 会議となっていることが気になって夜も眠れない方が多いのではないかと思います。名称を変更した経緯についてコメントを残しておきます。

「何か熱い思いが込められているのではないか？」と期待させているかもしれませんが、実は違います。福岡で地域 Ruby会議を開催することを嫁六に話した際、

_「で、三重や松本でやってるやつと何が違うの？」_

と質問され「インターナショナルカンファレンスの RubyKaigi とリージョナルカンファレンスの Ruby会議があってだな…」と説明しましたが、いまいち腑に落ちていないようでした。

全く異なるものなんだよ、と伝えているものの、耳から入る音は「るびーかいぎ」なので違いが分からないようでした。どうしたら上手く腑に落とせるか悩んでいたところに、[地域Ruby会議名の命名規約を変更(緩和)したい](https://github.com/ruby-no-kai/official/issues/448)という Issue が作成されました。全く異なるカンファレンスということで思い切って名称を変更しました。

なお、名称は [PHPerKaigi](https://phperkaigi.jp/) にインスパイアされました。これを機に各地域の方もオリジナリティに溢れる名称にしてみてはいかがでしょうか。

### 著者について

* [@m-nishijima](https://github.com/MasayaNishijima)

Ruby歴1年の新米Rubyistです。 学生時代は電気電子工学を専攻していたが、C言語でプログラミングの面白さに触れそこからRubyプログラマーへ。最近は分散型SNS熱が再燃し、お一人様サーバーを運用しています。
